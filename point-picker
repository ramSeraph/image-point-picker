#!/bin/bash

# Check if a file path is provided
if [ -z "$1" ]; then
  echo "Usage: $0 <file_path>"
  exit 1
fi

FILE_PATH=$1
BASE_URL="https://ramseraph.github.io/image-point-picker/"

# Encode the image to base64
DATA_URL=$(base64 < "$FILE_PATH")

# Get the MIME type of the image
MIME_TYPE=$(file -b --mime-type "$FILE_PATH")

# Construct the final URL with the query parameter
FINAL_URL="${BASE_URL}?imagedata=data:${MIME_TYPE};base64,${DATA_URL}"

echo "Opening URL: ${FINAL_URL}"

# Open the URL in the default browser
open "${FINAL_URL}"
